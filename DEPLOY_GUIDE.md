# üöÄ GU√çA DE DESPLIEGUE: VERCEL + SUPABASE

**Sistema:** AIJMIROSHOP  
**Fecha:** 21 de Octubre, 2025  
**Backend:** Supabase (PostgreSQL)  
**Hosting:** Vercel

---

## üìã REQUISITOS PREVIOS

1. **Cuenta de GitHub** (gratuita)
2. **Cuenta de Vercel** (gratuita) - https://vercel.com
3. **Cuenta de Supabase** (gratuita) - https://supabase.com
4. **Git instalado** en tu computadora
5. **Node.js** instalado (opcional, para desarrollo local)

---

## üóÑÔ∏è PASO 1: CONFIGURAR SUPABASE

### 1.1 Crear Proyecto en Supabase

1. Ve a https://supabase.com
2. Click en **"Start your project"** o **"New Project"**
3. Completa los datos:
   - **Organization:** Crea una nueva o usa existente
   - **Name:** `aijmiroshop` (o el nombre que prefieras)
   - **Database Password:** Genera una contrase√±a segura (¬°GU√ÅRDALA!)
   - **Region:** Elige el m√°s cercano (ej: South America - S√£o Paulo)
   - **Pricing Plan:** Free (gratis)
4. Click en **"Create new project"**
5. Espera 2-3 minutos mientras se crea el proyecto

### 1.2 Ejecutar el Schema SQL

1. En tu proyecto de Supabase, ve a la secci√≥n **"SQL Editor"** (men√∫ lateral)
2. Click en **"New query"**
3. Abre el archivo `supabase-schema.sql` de este proyecto
4. **Copia todo el contenido** del archivo
5. **Pega** en el editor SQL de Supabase
6. Click en **"Run"** (o presiona Ctrl+Enter)
7. Ver√°s el mensaje: **"Success. No rows returned"**

### 1.3 Verificar las Tablas

1. Ve a **"Table Editor"** en el men√∫ lateral
2. Deber√≠as ver estas tablas:
   - ‚úÖ `users` (2 filas: admin y operador)
   - ‚úÖ `products` (3 filas de ejemplo)
   - ‚úÖ `clients` (3 filas de ejemplo)
   - ‚úÖ `sales` (0 filas)
   - ‚úÖ `sale_items` (0 filas)
   - ‚úÖ `settings` (1 fila: ticketSettings)

### 1.4 Obtener las Credenciales

1. Ve a **"Settings"** ‚Üí **"API"** en el men√∫ lateral
2. En la secci√≥n **"Project API keys"**, copia:
   - **Project URL:** `https://xxxxxxxxxxxxx.supabase.co`
   - **anon public:** `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...` (es largo)
3. **GUARDA ESTAS CREDENCIALES** (las necesitar√°s en el siguiente paso)

---

## üì¶ PASO 2: SUBIR A GITHUB

### 2.1 Inicializar Git (si no lo has hecho)

Abre PowerShell en la carpeta del proyecto y ejecuta:

```powershell
# Inicializar repositorio
git init

# Agregar todos los archivos
git add .

# Hacer el primer commit
git commit -m "Initial commit - AIJMIROSHOP v1.0"
```

### 2.2 Crear Repositorio en GitHub

1. Ve a https://github.com
2. Click en el **"+"** arriba a la derecha ‚Üí **"New repository"**
3. Completa:
   - **Repository name:** `aijmiroshop`
   - **Description:** "Sistema de Gesti√≥n de Inventario"
   - **Visibility:** Private (recomendado) o Public
   - **NO** marques "Initialize with README" (ya tienes archivos)
4. Click en **"Create repository"**

### 2.3 Conectar y Subir

Copia los comandos que GitHub te muestra y ejec√∫talos:

```powershell
# Configurar el remote (reemplaza TU_USUARIO con tu nombre de usuario)
git remote add origin https://github.com/TU_USUARIO/aijmiroshop.git

# Cambiar a rama main
git branch -M main

# Subir al repositorio
git push -u origin main
```

**¬°Listo!** Tu c√≥digo est√° en GitHub.

---

## üåê PASO 3: DESPLEGAR EN VERCEL

### 3.1 Importar desde GitHub

1. Ve a https://vercel.com
2. Click en **"Add New..."** ‚Üí **"Project"**
3. Si es tu primera vez, conecta tu cuenta de GitHub
4. Busca el repositorio **"aijmiroshop"**
5. Click en **"Import"**

### 3.2 Configurar Variables de Entorno

**MUY IMPORTANTE:** Antes de hacer deploy, configura las variables:

1. En la pantalla de configuraci√≥n, despliega **"Environment Variables"**
2. Agrega estas 2 variables:

   **Variable 1:**
   - **Key:** `SUPABASE_URL`
   - **Value:** `https://xxxxxxxxxxxxx.supabase.co` (tu URL de Supabase)

   **Variable 2:**
   - **Key:** `SUPABASE_ANON_KEY`
   - **Value:** `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...` (tu anon key)

3. Aseg√∫rate de marcar **"Production"** para cada variable

### 3.3 Hacer Deploy

1. Click en **"Deploy"**
2. Espera 1-2 minutos mientras Vercel construye y despliega tu sitio
3. Ver√°s **"Congratulations!"** cuando est√© listo
4. Click en **"Visit"** para abrir tu sitio

### 3.4 Obtener tu URL

Tu sitio estar√° disponible en:
```
https://aijmiroshop.vercel.app
```
(o el nombre que Vercel le asigne)

---

## ‚úÖ PASO 4: VERIFICAR QUE TODO FUNCIONE

### 4.1 Probar el Sistema

1. Abre tu sitio en Vercel
2. Abre la **consola del navegador** (F12 ‚Üí Console)
3. Deber√≠as ver: **"‚úÖ Supabase inicializado correctamente"**
4. Intenta hacer login:
   - Usuario: `admin`
   - Contrase√±a: `admin123`

### 4.2 Probar Funcionalidades

- ‚úÖ Login como Admin y Operador
- ‚úÖ Ver inventario (productos de ejemplo)
- ‚úÖ Crear un producto nuevo
- ‚úÖ Registrar una venta
- ‚úÖ Ver el historial
- ‚úÖ Verificar que los datos persistan al recargar la p√°gina

### 4.3 Verificar en Supabase

1. Ve a Supabase ‚Üí **"Table Editor"**
2. Abre la tabla **"sales"**
3. Si hiciste una venta de prueba, deber√≠a aparecer aqu√≠
4. Verifica tambi√©n **"sale_items"** y **"products"**

---

## üîÑ PASO 5: ACTUALIZAR EL SISTEMA (FUTUROS CAMBIOS)

Cuando hagas cambios al c√≥digo:

```powershell
# 1. Ver archivos modificados
git status

# 2. Agregar cambios
git add .

# 3. Hacer commit
git commit -m "Descripci√≥n de los cambios"

# 4. Subir a GitHub
git push

# Vercel desplegar√° autom√°ticamente los cambios
```

---

## ‚ö†Ô∏è IMPORTANTE: SEGURIDAD

### Cambiar Contrase√±as Predeterminadas

**ANTES DE USAR EN PRODUCCI√ìN:**

1. Ve a Supabase ‚Üí SQL Editor
2. Ejecuta este SQL para cambiar contrase√±as:

```sql
-- Cambiar contrase√±a del admin
UPDATE users 
SET password = 'TU_NUEVA_CONTRASE√ëA_SEGURA_ADMIN' 
WHERE username = 'admin';

-- Cambiar contrase√±a del operador
UPDATE users 
SET password = 'TU_NUEVA_CONTRASE√ëA_SEGURA_OPERADOR' 
WHERE username = 'operador';
```

3. Usa contrase√±as seguras (m√≠nimo 12 caracteres, letras, n√∫meros, s√≠mbolos)

### Implementar Encriptaci√≥n (Recomendado)

Para producci√≥n real, deber√≠as:
1. Usar bcrypt para encriptar contrase√±as
2. Implementar autenticaci√≥n JWT
3. Configurar RLS (Row Level Security) en Supabase m√°s estricto

---

## üé® PASO 6: PERSONALIZAR DOMINIO (OPCIONAL)

### 6.1 Configurar Dominio Personalizado

Si tienes un dominio propio (ej: `mitienda.com`):

1. En Vercel, ve a tu proyecto ‚Üí **"Settings"** ‚Üí **"Domains"**
2. Click en **"Add"**
3. Ingresa tu dominio: `mitienda.com` o `www.mitienda.com`
4. Sigue las instrucciones para configurar DNS
5. Espera propagaci√≥n (puede tardar hasta 24 horas)

---

## üìä MONITOREO Y M√âTRICAS

### Vercel Analytics (Opcional)

1. En Vercel, ve a tu proyecto ‚Üí **"Analytics"**
2. Habilita analytics para ver:
   - N√∫mero de visitas
   - Rendimiento del sitio
   - Errores en tiempo real

### Supabase Monitoring

1. En Supabase ‚Üí **"Database"** ‚Üí **"Database Health"**
2. Monitorea:
   - Uso de almacenamiento
   - Consultas por segundo
   - Conexiones activas

---

## üêõ SOLUCI√ìN DE PROBLEMAS

### Problema: "Supabase no se inicializa"

**Soluci√≥n:**
1. Verifica las variables de entorno en Vercel
2. Aseg√∫rate de que `SUPABASE_URL` y `SUPABASE_ANON_KEY` est√©n correctas
3. Re-despliega el proyecto en Vercel

### Problema: "Error al guardar datos"

**Soluci√≥n:**
1. Ve a Supabase ‚Üí SQL Editor
2. Ejecuta:
   ```sql
   SELECT * FROM users LIMIT 1;
   ```
3. Si da error, verifica que el schema se haya ejecutado correctamente

### Problema: "No aparecen los productos de ejemplo"

**Soluci√≥n:**
1. Ve a Supabase ‚Üí Table Editor ‚Üí products
2. Si est√° vac√≠a, ejecuta nuevamente la secci√≥n de datos iniciales del schema

### Problema: "El sistema sigue usando localStorage"

**Soluci√≥n:**
1. Abre la consola del navegador (F12)
2. Ejecuta: `window.supabaseConfig.getMode()`
3. Si dice "localStorage", verifica:
   - Que las variables de entorno est√©n en Vercel
   - Que hayas hecho un nuevo deploy despu√©s de agregarlas
   - Que la URL de Supabase sea correcta

---

## üìà L√çMITES DEL PLAN GRATUITO

### Vercel (Free)
- ‚úÖ 100 GB de ancho de banda/mes
- ‚úÖ Despliegues ilimitados
- ‚úÖ SSL autom√°tico
- ‚úÖ Analytics b√°sicos

### Supabase (Free)
- ‚úÖ 500 MB de almacenamiento
- ‚úÖ 2 GB de transferencia/mes
- ‚úÖ 50,000 usuarios activos mensuales
- ‚úÖ 500 MB de archivos (storage)

**Para la mayor√≠a de negocios peque√±os, esto es m√°s que suficiente.**

---

## üéØ PR√ìXIMOS PASOS

### Mejoras Recomendadas

1. **Autenticaci√≥n Real:**
   - Implementar Supabase Auth
   - Usar JWT tokens
   - Encriptar contrase√±as con bcrypt

2. **Backup Autom√°tico:**
   - Configurar backups diarios en Supabase
   - Exportar datos peri√≥dicamente

3. **Notificaciones:**
   - Email al admin cuando stock bajo
   - WhatsApp para confirmar ventas

4. **PWA Completa:**
   - Service Worker para offline
   - Push notifications

5. **Reportes Avanzados:**
   - Exportar a PDF
   - Dashboard en tiempo real

---

## ‚úÖ CHECKLIST FINAL

Antes de compartir tu sitio:

- [ ] Schema SQL ejecutado en Supabase
- [ ] Tablas creadas y con datos de ejemplo
- [ ] Variables de entorno configuradas en Vercel
- [ ] Deploy exitoso en Vercel
- [ ] Login funciona correctamente
- [ ] Crear producto funciona
- [ ] Registrar venta funciona
- [ ] Datos persisten en Supabase
- [ ] **Contrase√±as predeterminadas cambiadas**
- [ ] Probado en diferentes dispositivos (m√≥vil, tablet, desktop)
- [ ] SSL activo (candado verde en navegador)

---

## üìû SOPORTE

### Recursos √ötiles

- **Vercel Docs:** https://vercel.com/docs
- **Supabase Docs:** https://supabase.com/docs
- **Vercel Community:** https://github.com/vercel/vercel/discussions
- **Supabase Discord:** https://discord.supabase.com

---

## üéâ ¬°FELICIDADES!

Tu sistema AIJMIROSHOP ahora est√°:
- ‚úÖ En la nube (accesible desde cualquier lugar)
- ‚úÖ Con base de datos real (PostgreSQL)
- ‚úÖ SSL/HTTPS autom√°tico (seguro)
- ‚úÖ Responsive (funciona en m√≥viles)
- ‚úÖ Escalable (puede crecer con tu negocio)
- ‚úÖ Gratis (mientras est√©s en los l√≠mites)

**URL de tu sistema:** https://tu-proyecto.vercel.app

---

**Documento generado autom√°ticamente**  
**AIJMIROSHOP Deploy Guide v1.0**  
**¬© 2025 - Vercel + Supabase**
